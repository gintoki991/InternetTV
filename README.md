# InternetTV
## 1. データベースを構築する
### データベース設計の前に
画面図など，仕様を決めておく


### 論理設計
どんなものを作るか，概念的に作る
#### 1.エンティティの定義
システムを作るにあたって必要な事象を定義する。
どういうデータがシステム上で出てきて，保存する必要があるかを可視化する。
1. 何をデータとして保存するかを書き出す
* システムで使用するもの
```
例
 1.農学部，2.工学部
 1.農学，3.心理学
```

* ユーザーが登録するもの
```
例
　101.小野，230.内田
（小野が心理学を受講，小野が農学部に所属）
```

2. 具体的なデータを抽象化してエンティティ（実体）としてまとめる
```
例
 1.農学部，2.工学部 →　学部ID，学部名
 1.農学，3.心理学 →　科目ID,科目名
 101.小野，230.内田 →　生徒ID，生徒名
```

* インターネットTV
```
エンティティの定義
 * チャンネル:
 　ドラマ1、ドラマ2、アニメ1、アニメ2、スポーツ、ペット
 * 放映時間:

 * 各エピソード情報：
  -シーズン数，
  -エピソード数，
  -タイトル，
  -エピソード詳細，
  -動画時間，
  -公開日，
  -視聴数，
  （単発エピソードの場合は，シーズン数，エピソード数は表示されない）

 * ジャンル名（アニメ、映画、ドラマ、ニュース）:
   各番組は1つ以上のジャンルに属する

* 番組情報として，タイトル、番組詳細、ジャンルが画面上に表示される
* KPIとして、チャンネルの番組枠のエピソードごとに視聴数を記録する。なお、一つのエピソードは複数の異なるチャンネル及び番組枠で放送されることがあるので、属するチャンネルの番組枠ごとに視聴数がどうだったかも追えるようにする
```


3. テーブル名と列名を定義し，データを入れる
>例）
>
>| 生徒名 | 学部ID | 学部名 | 科目ID | 科目名 |
>| ---- | ---- | ---- | ---- | ---- |
>| 小野 | 101 | 農学部 | 3 | 心理学 |

>インターネットTV
>
>| カラム名 | データ型 |	NULL | キー | 初期値 | AUTO INCREMENT | ユニークキー制約 |
>| ------- |------- | ---- | ---- | ---- | ---- | ------- |
>|チャンネルid|bigint(20)||PRIMARY||YES||
>|チャンネル|varchar(100)||INDEX||||
>|放映時間|time||||||
>|シーズン数|INTEGER||||||
>|エピソード数|INTEGER|||||YES|
>|タイトル|varchar(100)||||||
>|エピソード詳細|text|YES|||||
>|動画時間|time||||||
>|公開日|date|YES|||||
>|視聴数|bigint(20)|||0|||
>|ジャンル名|varchar(100)||INDEX||||
>
>　＊外部キー制約（子テーブルにだけ設定）

#### 2.正規化
データの重複（冗長性）をなくし，データの不整合（非一貫性）をなくすようにデータベースを設計する設計手法
* データを一意に特定できるように，PRIMARY（主キー）を設定する
1. 第一正規化
　1つのセルの中には1つの値しか含まない形
　　第一正規系にする際は，データが増えてもカラムの追加なしで対応できるようにする
2. 第二正規化
　部分的関数従属性（主キーの一部のカラムに対して従属するカラムがある）をなくした形
　　方法：テーブル分割することが基本的な手法
3. 第三正規化
　第二正規形推移的関数従属性をなくした形
　　方法：テーブル分割することが基本的な手法
4. ボイスコット正規化
　第三正規形から，非キーから主キーへの関数従属性をなくした形
　　方法：テーブル分割することが基本的な手法


#### 3.リレーションの直行性のチェック
　DB全体（複数のリレーション間）で同じ値を含まないようにする
　　方法：カラムの名前を統一する
　　　　　共通のデータは１箇所にまとめる
　　　　　アプリケーションコードも必要に応じて修正する
　　　　　* 全てのデータを直行化しなくても良い（例えばIDのような主キー）

#### 4.ER図の作成
　各テーブルの持つデータとデーブル同士の関係を整理するための図
　テーブル同士の関係は，1対1，1対多，多対多がある
　正規化することで，1対多の関係が生まれる
　多対多の場合は中間テーブルを作成し，1対多の形にする

### 物理設計
#### 5.テーブル定義
　データベース上でテーブルを作成するために必要なコクモクを定義する。
　　* テーブル名
　　- カラム名
　　- データ型：INTEGER，VARCHAR，DATEなど
　　- PK（プライマリーキー）：その値を指定すれば，必ず１行のレコードが特定できる列の組み合わせ。主キーともいう。
　　- UK(ユニークキー)：重複を許さない列の組み合わせ。例えば，メールアドレスの列。何個でも設定可能
　　- NOT NULL制約：NULLを入れてはならないとする制約
　　- デフォルト値：データ登録時に該当列が空白だった際に指定のデフォルト値を入れる
　- 外部キー制約：他のテーブルのデータを参照するようにカラムにつける制約。親テーブルに存在しているデータしか子テーブルには保存できなくなる。他のテーブルの列を参照する場合は設定する。外部キーに使用する列は，何らかのコードやID等の表記体系の定まったデータを用いる。
　　* 外部キー制約のアクション：RESTRICT／デフォルト，CASCADE／親テーブルのレコードが変更されたら，子テーブルも変更削除される
　
#### 6.インデックス設定
索引を作ることで検索が速くなる

## 2. ステップ1で設計したテーブルを構築します

## 3. サンプルデータを入れます。

サンプルデータはご自身で作成ください（ChatGPTを利用すると比較的簡単に生成できます）

手順のドキュメントは、他の人が見た時にその手順通りに実施すればテーブル作成及びサンプルデータ格納が行えるように記載してください。
